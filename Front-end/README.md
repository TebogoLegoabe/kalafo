# Kalafo Frontend - Telemedicine Platform

A modern React-based telemedicine platform frontend built with TanStack Router, React Query, and Tailwind CSS. This application provides role-based dashboards for patients, doctors, and administrators with secure authentication and real-time data management.

## ğŸ¯ Project Overview

Kalafo is a comprehensive telemedicine solution that connects patients with healthcare providers through secure remote consultations. The frontend is built as a Single Page Application (SPA) with three distinct user experiences:

- **Patient Dashboard**: View appointments, medical history, and health data
- **Doctor Dashboard**: Manage consultations, patients, schedules, and medical records
- **Admin Dashboard**: System overview, user management, and analytics

## ğŸ› ï¸ Tech Stack & Libraries

### Core Framework
- **React 18** - Modern React with hooks and concurrent features
- **TypeScript** - Type-safe development with full IDE support
- **Vite** - Lightning-fast build tool and dev server

### Routing & Navigation
- **TanStack Router** (`@tanstack/react-router`) - File-based routing with type safety
  - Automatic route generation from file structure
  - Built-in code splitting and lazy loading
  - Type-safe navigation and params
  - Loader functions for data fetching before render

### Data Fetching & State Management
- **TanStack Query** (`@tanstack/react-query`) - Powerful async state management
  - Server state synchronization
  - Automatic caching and background refetching
  - Optimistic updates and mutations
  - Built-in loading and error states
- **Zustand** (`zustand`) - Lightweight client state management
  - Used for auth state and user session
  - Simpler alternative to Redux with hooks API

### HTTP Client
- **Axios** - Promise-based HTTP client
  - Interceptors for auth token injection
  - Automatic 401 handling and token refresh
  - Request/response transformation
  - Better error handling than fetch API

### UI & Styling
- **Tailwind CSS** - Utility-first CSS framework
  - Rapid UI development
  - Consistent design system
  - Mobile-first responsive design
- **shadcn/ui** - High-quality, accessible component library
  - Built on Radix UI primitives
  - Fully customizable with Tailwind
  - Copy-paste component architecture
- **Framer Motion** - Production-ready animation library
  - Smooth page transitions
  - Gesture animations
  - Layout animations

### Form Handling & Validation
- **React Hook Form** - Performant form library
  - Minimal re-renders
  - Easy validation integration
  - TypeScript support

### Utilities
- **date-fns** - Modern date utility library
  - Formatting timestamps
  - Date calculations
  - Lightweight alternative to moment.js
- **clsx** & **tailwind-merge** - Utility for conditional classNames
- **lucide-react** - Beautiful, consistent icon set
- **react-hot-toast** - Toast notifications

## ğŸ“ Project Structure

```
Front-end/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                  # API client and endpoints
â”‚   â”‚   â””â”€â”€ kalafo.ts        # Axios instance, auth helpers, typed API functions
â”‚   â”œâ”€â”€ components/          # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ ui/             # shadcn/ui components
â”‚   â”‚   â”œâ”€â”€ Header.tsx      # Landing page navigation
â”‚   â”‚   â””â”€â”€ Footer.tsx      # Landing page footer
â”‚   â”œâ”€â”€ lib/                # Utility functions
â”‚   â”‚   â””â”€â”€ utils.ts        # cn() helper for className merging
â”‚   â”œâ”€â”€ routes/             # File-based routing (auto-generated by TanStack)
â”‚   â”‚   â”œâ”€â”€ __root.tsx      # Root layout with auth guards
â”‚   â”‚   â”œâ”€â”€ index.tsx       # Landing page (/)
â”‚   â”‚   â”œâ”€â”€ auth/           # Authentication routes
â”‚   â”‚   â”‚   â”œâ”€â”€ route.tsx   # Auth layout
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx   # Login (/auth)
â”‚   â”‚   â”‚   â”œâ”€â”€ register.tsx # Registration (/auth/register)
â”‚   â”‚   â”‚   â””â”€â”€ forgot.tsx  # Password reset (/auth/forgot)
â”‚   â”‚   â””â”€â”€ dashboard/      # Protected dashboard routes
â”‚   â”‚       â”œâ”€â”€ route.tsx   # Dashboard layout with sidebar
â”‚   â”‚       â”œâ”€â”€ index.tsx   # Patient dashboard (/dashboard)
â”‚   â”‚       â”œâ”€â”€ admin/      # Admin routes (/dashboard/admin)
â”‚   â”‚       â””â”€â”€ doctor/     # Doctor routes (/dashboard/doctor)
â”‚   â”œâ”€â”€ stores/             # Zustand state stores
â”‚   â”‚   â””â”€â”€ auth.ts         # Authentication state
â”‚   â”œâ”€â”€ styles.css          # Global styles and Tailwind imports
â”‚   â”œâ”€â”€ main.tsx            # App entry point
â”‚   â””â”€â”€ routeTree.gen.ts    # Auto-generated route tree (DO NOT EDIT)
â”œâ”€â”€ public/                 # Static assets
â”œâ”€â”€ index.html             # HTML entry point
â”œâ”€â”€ vite.config.ts         # Vite configuration
â”œâ”€â”€ tailwind.config.ts     # Tailwind configuration
â”œâ”€â”€ tsconfig.json          # TypeScript configuration
â””â”€â”€ package.json           # Dependencies and scripts
```

## ğŸš€ Getting Started

### Prerequisites
- **Node.js** v18 or higher
- **React** v19 
- **npm** or **pnpm** package manager
- Backend API running (default: `http://localhost:5000/api`)

### Installation

1. **Install dependencies:**
```bash
npm install
```

2. **Set up environment variables:**
Create a `.env` file in the root directory:
```env
VITE_BASE_URL=http://localhost:5000/api
```

3. **Start development server:**
```bash
npm run dev
```

The app will be available at `http://localhost:3000`

## ğŸ”‘ Authentication Flow

1. **Login/Register** - User submits credentials via `/auth` routes
2. **Token Storage** - JWT token stored in `localStorage` with key `token`
3. **Axios Interceptor** - Auto-attaches `Authorization: Bearer <token>` header to all requests
4. **Auth Store** - Zustand store maintains user session state
5. **Route Guards** - `__root.tsx` redirects unauthenticated users to `/auth`
6. **Role-Based Routing** - After login, redirects to role-specific dashboard:
   - Admin â†’ `/dashboard/admin`
   - Doctor â†’ `/dashboard/doctor`
   - Patient â†’ `/dashboard`

## ğŸ“¡ API Integration

All API calls are centralized in [`src/api/kalafo.ts`](src/api/kalafo.ts):

```ts
// Example usage in a component
import { useQuery } from '@tanstack/react-query'
import { getPatientDashboard } from '@/api/kalafo'

function PatientDashboard() {
  const { data, isLoading, error } = useQuery({
    queryKey: ['patient-dashboard'],
    queryFn: getPatientDashboard,
  })
  
  if (isLoading) return <div>Loading...</div>
  if (error) return <div>Error: {error.message}</div>
  
  return <div>{/* Render dashboard */}</div>
}
```

### Available API Functions
- `login(credentials)` - Authenticate user
- `register(userData)` - Create new account
- `getMe()` - Fetch current user profile
- `getAdminDashboard()` - Admin stats and data
- `getDoctorDashboard()` - Doctor consultations and patients
- `getPatientDashboard()` - Patient appointments and history
- `getAllUsers()` - List all users (admin only)
- `getAllPatients()` - List all patients (doctor/admin)

## ğŸ¨ Styling System

### Tailwind CSS
Utility classes for rapid UI development:
```tsx
<div className="flex items-center gap-4 p-6 bg-teal-50 rounded-lg shadow-sm">
  <Button className="bg-teal-600 hover:bg-teal-700">
    Click Me
  </Button>
</div>
```

### shadcn/ui Components
Pre-built, accessible components:
```tsx
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card'

<Card>
  <CardHeader>
    <CardTitle>Dashboard</CardTitle>
  </CardHeader>
  <CardContent>
    {/* Content */}
  </CardContent>
</Card>
```

### Design Tokens
- **Primary Color**: Teal (`teal-600`, `teal-700`)
- **Accent Color**: Sky (`sky-600`, `sky-200`)
- **Background**: White/Gray-50
- **Text**: Gray-900/Gray-600

## ğŸ§­ Routing

### File-Based Routing
Routes are automatically generated from the `src/routes/` directory structure:

```
routes/
  index.tsx           â†’ /
  auth/
    index.tsx         â†’ /auth
    register.tsx      â†’ /auth/register
  dashboard/
    index.tsx         â†’ /dashboard
    admin/
      index.tsx       â†’ /dashboard/admin
```

### Adding a New Route
1. Create a new file in `src/routes/`: `src/routes/new-page.tsx`
2. TanStack Router auto-generates the route
3. The file must export a Route with `createFileRoute()`:

```tsx
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/new-page')({
  component: NewPage,
})

function NewPage() {
  return <div>New Page</div>
}
```

### Navigation
```tsx
import { Link } from '@tanstack/react-router'

<Link to="/dashboard/admin">Go to Admin</Link>
```

### Route Loaders
Pre-fetch data before rendering:
```tsx
export const Route = createFileRoute('/dashboard/admin/')({
  loader: async ({ context }) => {
    return await getAdminDashboard()
  },
  component: AdminDashboard,
})

function AdminDashboard() {
  const data = Route.useLoaderData()
  return <div>{/* Use data */}</div>
}
```

## ğŸ”„ State Management

### Server State (TanStack Query)
For async data fetching and caching:
```tsx
const { data, isLoading, refetch } = useQuery({
  queryKey: ['consultations'],
  queryFn: getDoctorDashboard,
  refetchInterval: 30000, // Auto-refresh every 30s
})

const mutation = useMutation({
  mutationFn: updatePatient,
  onSuccess: () => {
    queryClient.invalidateQueries(['patients'])
  },
})
```

### Client State (Zustand)
For user session and auth:
```tsx
import { useAuthStore } from '@/stores/auth'

function Profile() {
  const user = useAuthStore((s) => s.user)
  const logout = useAuthStore((s) => s.logout)
  
  return <button onClick={logout}>Logout {user?.email}</button>
}
```

## ğŸ§ª Testing

Run tests with Vitest:
```bash
npm run test
```

## ğŸ—ï¸ Building for Production

```bash
npm run build
```

Outputs to `dist/` directory. Deploy to any static hosting service (Vercel, Netlify, AWS S3, etc.)

## ğŸ› Common Issues

### API Connection Errors
- Ensure backend is running at `http://localhost:5000`
- Check CORS settings in backend
- Verify `VITE_BASE_URL` in `.env`

### Token Expired
- App auto-redirects to `/auth` on 401 responses
- Token is cleared from localStorage
- User must log in again

### Route Not Found
- Ensure file naming matches TanStack Router conventions
- Check `routeTree.gen.ts` for registered routes
- Restart dev server to regenerate route tree

## ğŸ“š Key Libraries Documentation

- [TanStack Router](https://tanstack.com/router/latest) - File-based routing
- [TanStack Query](https://tanstack.com/query/latest) - Server state management
- [Tailwind CSS](https://tailwindcss.com) - Utility-first CSS
- [shadcn/ui](https://ui.shadcn.com) - Component library
- [Framer Motion](https://www.framer.com/motion) - Animation library
- [Axios](https://axios-http.com) - HTTP client
- [Zustand](https://zustand-demo.pmnd.rs) - State management

## ğŸ¤ Contributing

1. Create a new branch for your feature
2. Follow existing code style and conventions
3. Test thoroughly before submitting PR
4. Update this README if adding new features

## ğŸ“„ License

MIT License - see LICENSE file for details

---

**Built with â¤ï¸ by the Kalafo Team**
